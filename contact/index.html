<!DOCTYPE html><html lang="fr"> <head><meta charset="utf-8"><title>Contact - Léo Palich</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Portfolio de Léo Palich, étudiant en sciences cognitives, parcours Intelligence Artificielle Centrée Humain"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="canonical" href="https://leopalich.com/"><link rel="stylesheet" href="/_astro/contact.Dai3gNQY.css"></head> <body> <div class="page-wrapper"> <!-- Barre horizontale --> <!-- Barre horizontale collée en haut --><header class="topbar"> <nav class="topbar-nav"> <!-- Nom / logo --> <h1 class="site-name"> <span class="first">Léo</span> <span class="last">Palich</span> </h1> <!-- Bouton burger (mobile) --> <button id="menu-toggle" class="burger" aria-label="Menu" aria-expanded="false"> <span class="bar"></span><span class="bar"></span><span class="bar"></span> </button> <!-- Liens de navigation --> <ul class="menu-list" id="menu-list"> <li> <a href="/" data-nav class="menu-link "> Accueil </a> </li><li> <a href="/projets" data-nav class="menu-link "> Projets </a> </li><li> <a href="/contact" data-nav class="menu-link "> Contact </a> </li> </ul> </nav> </header> <!-- Backdrop blur overlay for mobile menu (outside header) --> <div class="menu-backdrop" id="menu-backdrop"></div> <!-- mobile --> <script>
  const btn = document.getElementById("menu-toggle");
  const list = document.getElementById("menu-list");
  const backdrop = document.getElementById("menu-backdrop");
  const links = list.querySelectorAll("a");

  btn.addEventListener("click", () => {
    const open = list.classList.toggle("open");
    backdrop.classList.toggle("active", open);
    btn.setAttribute("aria-expanded", open);
  });

  // Fermer le menu quand on clique sur le backdrop
  backdrop.addEventListener("click", () => {
    list.classList.remove("open");
    backdrop.classList.remove("active");
    btn.setAttribute("aria-expanded", "false");
  });

  // Fermer le menu quand on clique sur un lien
  links.forEach((link) => {
    link.addEventListener(
      "click",
      () => {
        list.classList.remove("open");
        backdrop.classList.remove("active");
        btn.setAttribute("aria-expanded", "false");
      },
      true,
    ); // Use capture phase to fire before SPA navigation
  });
</script> <!-- Contenu principal --> <main>  <section class="chat-section"> <h1 class="title">Contactez-moi</h1> </section> <div class="glass-window"> <div class="contact-blocks" id="contact-buttons"> <button id="email-btn" class="contact-block-link"> <div class="icon-wrapper"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="card-icon"> <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path> <polyline points="22,6 12,13 2,6"></polyline> </svg> </div> <h3>Email</h3> </button> <a href="https://www.linkedin.com/in/leopalich" target="_blank" rel="noopener noreferrer" class="contact-block-link"> <div class="icon-wrapper"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="card-icon"> <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path> <rect x="2" y="9" width="4" height="12"></rect> <circle cx="4" cy="4" r="2"></circle> </svg> </div> <h3>LinkedIn</h3> </a> </div> <!-- Contact Form (hidden by default) --> <div class="contact-form-wrapper" id="contact-form" style="display: none;"> <button class="back-btn" id="back-btn"> <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <line x1="19" y1="12" x2="5" y2="12"></line> <polyline points="12 19 5 12 12 5"></polyline> </svg>
Retour
</button> <form class="email-form" action="https://formspree.io/f/mwpgnplk" method="POST"> <div class="form-group"> <label for="name">Nom</label> <input type="text" id="name" name="name" required> </div> <div class="form-group"> <label for="email">Email</label> <input type="email" id="email" name="email" required> </div> <div class="form-group"> <label for="subject">Sujet</label> <input type="text" id="subject" name="subject" required> </div> <div class="form-group"> <label for="message">Message</label> <textarea id="message" name="message" rows="6" required minlength="30"></textarea> <div id="char-count" class="char-count">0/30</div> </div> <button type="submit" class="submit-btn">Envoyer</button> </form> </div> </div>  </main> <div class="chat-container"> <div class="chat-window"> <!-- Status Bar --> <div class="status-bar"> <div class="status-indicator"> <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path> <circle cx="9" cy="10" r="0.5" fill="currentColor"></circle> <circle cx="12" cy="10" r="0.5" fill="currentColor"></circle> <circle cx="15" cy="10" r="0.5" fill="currentColor"></circle> </svg> </div> <div class="status-buttons"> <button id="fullscreen-btn" class="fullscreen-btn" aria-label="Fullscreen"> <svg class="expand-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path> </svg> <svg class="compress-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path> </svg> </button> <button id="toggle-btn" class="toggle-btn" aria-label="Toggle Chat"> <svg class="chevron-up-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <polyline points="18 15 12 9 6 15"></polyline> </svg> <svg class="chevron-down-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <polyline points="6 9 12 15 18 9"></polyline> </svg> </button> </div> </div> <!-- Chat Content --> <div class="chat-content"></div> <div class="input-wrapper"> <div class="input-container"> <input type="text" class="chat-input" placeholder="Posez-moi une question..."> <button class="send-btn" id="sendBtn"> <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <line x1="22" y1="2" x2="11" y2="13"></line> <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon> </svg> </button> </div> </div> </div> </div> <script type="module">
  function initChat() {
    const rootContainer = document.querySelector(".chat-container");
    const headerBar = document.querySelector(".status-bar");
    const toggleBtn = document.getElementById("toggle-btn");
    const fullscreenBtn = document.getElementById("fullscreen-btn");
    const MINIMIZED_KEY = "lp_chat_minimized_v1";
    const messagesArea = document.querySelector(".chat-content");
    const input = document.querySelector(".chat-input");
    const sendBtn = document.querySelector(".send-btn");
    if (!messagesArea || !input || !sendBtn) return;

    const HISTORY_KEY = "lp_chat_history_v1";
    let conversationHistory = [];
    let isTyping = false;

    try {
      const wasCollapsed = localStorage.getItem(MINIMIZED_KEY) === "1";
      if (wasCollapsed) rootContainer.classList.add("collapsed");
    } catch {
      /* no-op */
    }

    // --- toggle au clic sur la barre (seulement si pas en fullscreen)
    headerBar.addEventListener("click", (e) => {
      // Ignore if clicking the toggle or fullscreen button
      if (
        e.target.closest("#toggle-btn") ||
        e.target.closest("#fullscreen-btn")
      )
        return;

      // Ignore if in fullscreen mode
      if (rootContainer.classList.contains("fullscreen")) return;

      const willCollapse = !rootContainer.classList.contains("collapsed");
      rootContainer.classList.toggle("collapsed", willCollapse);
      try {
        localStorage.setItem(MINIMIZED_KEY, willCollapse ? "1" : "0");
      } catch {}

      if (!willCollapse) {
        setTimeout(() => {
          messagesArea.scrollTop = messagesArea.scrollHeight;
        }, 50);
      }
    });

    // --- toggle button (même logique que clic sur la barre)
    toggleBtn.addEventListener("click", (e) => {
      e.stopPropagation(); // Prevent header click event

      // Ignore if in fullscreen mode
      if (rootContainer.classList.contains("fullscreen")) return;

      const willCollapse = !rootContainer.classList.contains("collapsed");
      rootContainer.classList.toggle("collapsed", willCollapse);
      try {
        localStorage.setItem(MINIMIZED_KEY, willCollapse ? "1" : "0");
      } catch {}

      if (!willCollapse) {
        setTimeout(() => {
          messagesArea.scrollTop = messagesArea.scrollHeight;
        }, 50);
      }
    });

    // --- fullscreen toggle
    fullscreenBtn.addEventListener("click", (e) => {
      e.stopPropagation(); // Prevent header click event
      rootContainer.classList.toggle("fullscreen");

      // If entering fullscreen, make sure it's not collapsed
      if (rootContainer.classList.contains("fullscreen")) {
        rootContainer.classList.remove("collapsed");
      }

      setTimeout(() => {
        messagesArea.scrollTop = messagesArea.scrollHeight;
      }, 50);
    });

    // ==== helpers ====
    const loadHistory = () => {
      try {
        return JSON.parse(localStorage.getItem(HISTORY_KEY) || "[]");
      } catch {
        return [];
      }
    };
    const saveHistory = () => {
      localStorage.setItem(HISTORY_KEY, JSON.stringify(conversationHistory));
    };

    const createMessageBubble = (content, isUser = false, typing = false) => {
      const b = document.createElement("div");
      b.className = `message-bubble ${isUser ? "user-message" : "bot-message"}`;
      if (typing) b.classList.add("typing");
      b.textContent = content;
      return b;
    };
    const addMessage = (content, isUser = false) => {
      const b = createMessageBubble(content, isUser);
      messagesArea.appendChild(b);
      messagesArea.scrollTop = messagesArea.scrollHeight;
      return b;
    };

    // ==== restoration / welcome ====
    function initializeChat() {
      conversationHistory = loadHistory();
      messagesArea.innerHTML = "";

      if (conversationHistory.length > 0) {
        // Recrée toutes les bulles sauvegardées
        for (const m of conversationHistory) {
          const b = createMessageBubble(m.content, m.type === "user");
          messagesArea.appendChild(b);
        }
      } else {
        // Première ouverture → juste afficher le message d'accueil (non sauvegardé)
        const welcome = "Comment puis-je vous aider ?";
        const b = createMessageBubble(welcome, false);
        messagesArea.appendChild(b);
      }

      setTimeout(() => {
        messagesArea.scrollTop = messagesArea.scrollHeight;
      }, 50);
      input.disabled = false;
      sendBtn.disabled = false;
      isTyping = false;
    }

    // ==== envoi ====
    async function sendMessage() {
      const prompt = input.value.trim();
      if (!prompt || isTyping) return;

      addMessage(prompt, true);
      conversationHistory.push({
        type: "user",
        content: prompt,
        ts: Date.now(),
      });
      saveHistory();

      input.value = "";
      sendBtn.disabled = true;
      isTyping = true;
      const typing = addMessage("Laisse-moi réfléchir...", false, true);

      try {
        const res = await fetch("https://api.leopalich.com/ask", {
          method: "POST",
          headers: { "Content-Type": "application/json", Accept: "text/plain" },
          body: JSON.stringify({ prompt }),
        });
        typing.remove();
        const b = addMessage("", false);
        let text = "";

        if (!res.body || !res.body.getReader) {
          text = await res.text();
          b.textContent = text || "Réponse vide reçue du serveur.";
        } else {
          const reader = res.body.getReader();
          const dec = new TextDecoder("utf-8");
          while (true) {
            const { value, done } = await reader.read();
            if (done) break;
            text += dec.decode(value, { stream: true });
            b.textContent = text;
            messagesArea.scrollTop = messagesArea.scrollHeight;
          }
        }
        conversationHistory.push({
          type: "bot",
          content: text,
          ts: Date.now(),
        });
        saveHistory();
      } catch (e) {
        typing.remove();
        const msg = `Désolé, erreur: ${e.message}`;
        addMessage(msg, false);
        conversationHistory.push({ type: "bot", content: msg, ts: Date.now() });
        saveHistory();
      } finally {
        isTyping = false;
        sendBtn.disabled = false;
      }
    }

    sendBtn.addEventListener("click", sendMessage);
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !isTyping) sendMessage();
    });

    initializeChat();

    // --- Fonction globale pour appeler le chatbot depuis l'extérieur ---
    window.askChatbot = (promptText) => {
      // 1. Ouvrir le chat s'il est fermé (collapsed)
      if (rootContainer.classList.contains("collapsed")) {
        rootContainer.classList.remove("collapsed");
        try {
          localStorage.setItem(MINIMIZED_KEY, "0");
        } catch {}
      }

      // 2. Mettre en plein écran (fullscreen)
      if (!rootContainer.classList.contains("fullscreen")) {
        rootContainer.classList.add("fullscreen");
      }

      // 3. Remplir l'input et envoyer
      input.value = promptText;
      input.focus();

      // Petit délai pour laisser le temps à l'UI de s'ouvrir
      setTimeout(() => {
        sendMessage();
      }, 300);
    };
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initChat);
  } else {
    initChat();
  }
</script> <!-- components/Footer.astro --><footer>
© 2025 Léo Palich
</footer> <!-- Router interne (SPA-like) --> <script type="module">
        const main = document.querySelector("main");
        const linkSelector = "[data-nav]";

        async function navigate(url, push = true) {
          main.classList.add("is-loading");

          const html = await fetch(url).then((r) => r.text());
          const doc = new DOMParser().parseFromString(html, "text/html");

          /* Remplace le contenu du <main> */
          main.innerHTML = doc.querySelector("main").innerHTML;
          setTimeout(() => {
            if (window.initChat && typeof window.initChat === "function") {
              window.initChat();
            }
            // Ré-initialise le formulaire de contact si présent
            initContactForm();
          }, 100);

          /* <title> + meta description */
          document.title = doc.title;
          const newDesc = doc.querySelector(
            'meta[name="description"]',
          )?.content;
          if (newDesc) {
            let cur = document.querySelector('meta[name="description"]');
            if (!cur) {
              cur = document.createElement("meta");
              cur.name = "description";
              document.head.appendChild(cur);
            }
            cur.content = newDesc;
          }

          /* Lien actif */
          document
            .querySelectorAll(linkSelector)
            .forEach((a) => a.classList.toggle("is-active", a.href === url));

          if (push) history.pushState(null, "", url);
          main.classList.remove("is-loading");
          window.scrollTo({ top: 0 });
        }

        /* Interception des clics */
        document.addEventListener("click", (e) => {
          const a = e.target.closest(linkSelector);
          if (!a || a.origin !== location.origin) return;
          e.preventDefault();
          navigate(a.href);
        });

        /* Bouton précédent / suivant */
        window.addEventListener("popstate", () =>
          navigate(location.href, false),
        );

        /* --- Logique spécifique Page Contact --- */
        function initContactForm() {
          const emailBtn = document.getElementById("email-btn");
          const backBtn = document.getElementById("back-btn");
          const contactButtons = document.getElementById("contact-buttons");
          const contactForm = document.getElementById("contact-form");

          /* Logique compteur de caractères */
          const messageInput = document.getElementById("message");
          const charCount = document.getElementById("char-count");
          const submitBtn = document.querySelector(".submit-btn");

          // Gestion des boutons d'affichage
          if (emailBtn && contactButtons && contactForm && backBtn) {
            emailBtn.onclick = () => {
              contactButtons.style.display = "none";
              contactForm.style.display = "block";
            };

            backBtn.onclick = () => {
              contactForm.style.display = "none";
              contactButtons.style.display = "flex";
            };
          }

          // Gestion du compteur
          if (messageInput && charCount) {
            const minLength = 30;

            // Mise à jour de la fonction de validation
            const updateCount = () => {
              const currentLength = messageInput.value.length;
              charCount.textContent = `${currentLength}/${minLength}`;

              if (currentLength >= minLength) {
                charCount.classList.add("valid");
                if (submitBtn) submitBtn.disabled = false;
                if (submitBtn) submitBtn.style.opacity = "1";
                if (submitBtn) submitBtn.style.cursor = "pointer";
              } else {
                charCount.classList.remove("valid");
                if (submitBtn) submitBtn.disabled = true;
                if (submitBtn) submitBtn.style.opacity = "0.5";
                if (submitBtn) submitBtn.style.cursor = "not-allowed";
              }
            };

            messageInput.oninput = updateCount;
            // Init au chargement
            updateCount();
          }
        }

        // Initialisation au chargement initial
        initContactForm();
      </script> </div> </body> <div class="glow-wrapper" id="bg"> <div class="vignette"></div> <div class="dark-overlay"></div> <div class="hex-grid"></div> <div class="fog-texture"></div> <div class="noise"></div> <div class="grain"></div> <div class="spotlight"></div> </div> <script type="module">const e=document.getElementById("bg");e&&(e.style.setProperty("--mouse-x","50%"),e.style.setProperty("--mouse-y","50%"),document.addEventListener("pointermove",t=>{const n=t.clientX/window.innerWidth*100,o=t.clientY/window.innerHeight*100;e.style.setProperty("--mouse-x",`${n}%`),e.style.setProperty("--mouse-y",`${o}%`)}));</script> </html>