<!DOCTYPE html><html lang="fr"> <head><meta charset="utf-8"><title>L√©o Palich</title><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="L√©o Palich, √©tudiant en Sciences Cognitives, parcours Intelligence Artificielle Centr√©e Humain. Parlez lui √† travers son ChatBot."><link rel="canonical" href="https://leopalich.com/"> <script type="application/ld+json">{"@context":"https://schema.org","@type":"Person","name":"L√©o Palich","alternateName":"Leo Palich","url":"https://leopalich.com","sameAs":["https://www.linkedin.com/in/leopalich","https://github.com/leo-palich"],"jobTitle":"Etudiant en Sciences Cognitives","description":"Apprenant en traitement de donn√©es statistiques et intelligence artificielle"}</script> <link rel="stylesheet" href="/_astro/contact.B7N60HLm.css">
<style>.chat-content{margin-top:0rem;display:flex;flex-direction:column;position:relative;flex:1;overflow-y:auto;overflow-x:hidden;padding:1rem;justify-content:flex-start;gap:1rem;scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.2) transparent}.message-bubble{background:linear-gradient(135deg,#fffffff2,#fffffffa);color:var(--dark);padding:1.2rem 1.8rem;border-radius:1.8rem;font-size:1rem;line-height:1.5;box-shadow:0 8px 25px #00000026,0 0 40px #60a5fa1a;animation:messageAppear .5s ease-out;width:fit-content;max-width:85%;word-wrap:break-word;word-break:break-word;white-space:normal;overflow-wrap:break-word;hyphens:auto;transition:all .3s ease}.message-bubble.user-message{background:linear-gradient(135deg,#60a5fabb,#478af5a9);color:#fff;margin-left:auto;margin-right:0;border-bottom-right-radius:.5rem}.message-bubble.bot-message{margin-left:0;margin-right:auto;border-bottom-left-radius:.5rem}.message-bubble.typing{background:linear-gradient(135deg,#9ca3af33,#9ca3af4d);color:#fffc;animation:typingPulse 1.5s ease-in-out infinite}@keyframes messageAppear{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes typingPulse{0%,to{opacity:.6;transform:scale(1)}50%{opacity:1;transform:scale(1.02)}}.chat-content::-webkit-scrollbar{width:6px}.chat-content::-webkit-scrollbar-track{background:transparent}.chat-content::-webkit-scrollbar-thumb{background:#fff3;border-radius:3px}.chat-content::-webkit-scrollbar-thumb:hover{background:#ffffff4d}.input-wrapper{padding:1.5rem;background:#0000004d;border-top:1px solid rgba(255,255,255,.1);flex-shrink:0;position:relative;z-index:20}.chat-section{max-width:1200px;margin:0 auto;padding:0;text-align:center}.chat-container{max-width:800px;margin:0 auto;position:relative}.chat-window{background:linear-gradient(135deg,#ffffff08,#ffffff0d);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);border-radius:2rem;overflow:hidden;box-shadow:0 0 100px #60a5fa33,0 20px 50px #0000004d;position:relative;transition:all .3s ease;height:500px;display:flex;flex-direction:column}.chat-window:hover{transform:translateY(-5px);box-shadow:0 0 120px #60a5fa4d,0 30px 60px #0006}.status-bar{background:#ffffff0d;padding:1rem 2rem;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(255,255,255,.1);flex-shrink:0}.status-indicator{display:flex;align-items:center;gap:.5rem;font-size:.9rem;color:#ffffffb3}.status-dot{width:8px;height:8px;background:#10b981;border-radius:50%;animation:statusPulse 2s ease-in-out infinite}@keyframes statusPulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.2)}}@keyframes messageAppear{0%{opacity:0;transform:translateY(20px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.input-container{display:flex;gap:1rem;max-width:600px;margin:0 auto}.chat-input{flex:1;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:2rem;padding:1rem 1.5rem;color:var(--light);font-size:1rem;transition:all .3s ease}.chat-input:focus{outline:none;background:#ffffff14;border-color:#ffffff60}.send-btn{background:var(--button);border:none;border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;color:var(--light)}.send-btn:hover{background:var(--button-hover);transform:scale(1) rotate(40deg);color:var(--dark)}@media (max-width: 768px){.messages-area{padding:.8rem;gap:.8rem}.message-bubble{max-width:90%;font-size:.95rem;padding:1rem 1.4rem}.message-bubble.user-message,.message-bubble.bot-message{border-radius:1.5rem}.message-bubble.user-message{border-bottom-right-radius:.4rem}.message-bubble.bot-message{border-bottom-left-radius:.4rem}}.chat-input:focus{outline:none;background:#ffffff14;border-color:#fff3}.send-btn:disabled{opacity:.6;cursor:not-allowed;transform:scale(.95)}
</style></head> <body> <div class="page-wrapper"> <!-- Barre horizontale --> <!-- Barre horizontale coll√©e en haut --><header class="topbar"> <nav class="topbar-nav"> <!-- Nom / logo --> <h1 class="site-name"> <svg width="202.000000pt" height="246.000000pt" viewBox="0 0 202.000000 246.000000" preserveAspectRatio="xMidYMid meet" class="signature">

<g transform="translate(0.000000,246.000000) scale(0.100000,-0.100000)" fill="#FFFF" stroke="none">
<path d="M153 2404 c-3 -10 0 -22 8 -28 8 -6 45 -58 83 -116 107 -162 194
-276 293 -380 l89 -95 17 -145 c9 -79 15 -145 13 -147 -1 -2 -38 28 -82 65
-171 148 -348 270 -427 294 -58 17 -91 2 -95 -44 -4 -49 13 -86 127 -272 54
-89 140 -232 192 -320 160 -274 287 -437 349 -451 40 -9 83 9 101 42 18 34 15
193 -5 318 -8 50 -13 91 -12 92 2 2 36 -32 76 -75 41 -42 214 -219 384 -392
171 -173 327 -335 346 -359 43 -53 92 -111 145 -171 23 -25 65 -74 95 -110 63
-74 69 -80 92 -80 37 0 47 69 15 102 -7 7 -73 85 -147 173 -176 210 -366 420
-476 525 -49 46 -195 189 -325 317 l-237 233 -21 143 c-12 78 -21 146 -21 150
0 5 28 -16 63 -45 180 -156 285 -206 364 -173 68 29 68 107 -2 249 -83 170
-218 313 -330 351 -92 31 -152 -4 -177 -104 l-14 -54 -65 74 c-70 79 -136 166
-238 317 -35 51 -75 101 -89 112 -30 25 -80 26 -89 4z m673 -409 c49 -20 147
-117 200 -196 71 -108 121 -230 107 -265 -19 -50 -197 62 -357 224 l-58 60 3
79 c5 112 26 131 105 98z m-611 -249 c96 -64 269 -212 384 -329 l84 -85 23
-149 c13 -81 24 -188 24 -237 l0 -90 -36 35 c-54 52 -171 210 -254 344 -40 66
-112 181 -158 255 -47 74 -105 169 -129 210 -69 119 -58 127 62 46z" />
</g>
</svg> </h1> <!-- Bouton burger (mobile) --> <button id="menu-toggle" class="burger" aria-label="Menu" aria-expanded="false"> <span class="bar"></span><span class="bar"></span><span class="bar"></span> </button> <!-- Liens de navigation --> <ul class="menu-list" id="menu-list"> <li> <a href="/" data-nav class="menu-link is-active">Accueil</a> </li><li> <a href="/projets" data-nav class="menu-link ">Projets</a> </li><li> <a href="/contact" data-nav class="menu-link ">Contact</a> </li> </ul> </nav> <!-- ü™Ñ Toggle mobile --> <script>
    const btn  = document.getElementById('menu-toggle');
    const list = document.getElementById('menu-list');
    btn.addEventListener('click', () => {
      const open = list.classList.toggle('open');
      btn.setAttribute('aria-expanded', open);
    });
  </script> </header> <!-- Contenu principal --> <main>   <section class="chat-section"> <h1 class="title">Discutez avec mon&nbsp;<mark class="black">LLM</mark></h1> <p class="subtitle">Mon chatbot connait mes projets. </p> <div class="tech-badge"> <span>C'est possible gr√¢ce √† la g√©n√©ration augment√©e de r√©cup√©ration</span> </div> <div class="chat-container"> <div class="chat-window"> <!-- Status Bar --> <div class="status-bar"> <div class="status-indicator"> <div class="status-dot"></div> </div> <div class="status-indicator"> <span>Mod√®le: Gemma2 : 2B</span> </div> </div> <!-- Chat Content --> <div class="chat-content"></div> <div class="input-wrapper"> <div class="input-container"> <input type="text" class="chat-input" placeholder="Posez-moi une question..."> <button class="send-btn" id="sendBtn"> <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <line x1="22" y1="2" x2="11" y2="13"></line> <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon> </svg> </button> </div> </div> </div> </div> </section> <script type="module">
  function initChat() {
  const messagesArea = document.querySelector('.chat-content');
  const input = document.querySelector('.chat-input');
  const sendBtn = document.querySelector('.send-btn');
  
  console.log('Elements trouv√©s:', { messagesArea, input, sendBtn });

  if (!messagesArea || !input || !sendBtn) {
    console.error('√âl√©ments manquants - V√©rifiez les classes CSS');
    return;
  }

  let isTyping = false;
  let conversationHistory = []; // Historique de la conversation

  // Fonction pour cr√©er une bulle de message
  function createMessageBubble(content, isUser = false, isTyping = false) {
    const bubble = document.createElement('div');
    bubble.className = `message-bubble ${isUser ? 'user-message' : 'bot-message'}`;
    
    if (isTyping) {
      bubble.classList.add('typing');
    }
    
    bubble.textContent = content;
    return bubble;
  }

  // Fonction pour ajouter un message √† l'interface
  function addMessage(content, isUser = false) {
    const bubble = createMessageBubble(content, isUser);
    messagesArea.appendChild(bubble);
    
    // Scroll automatique vers le bas
    messagesArea.scrollTop = messagesArea.scrollHeight;
    
    return bubble;
  }

  // Fonction pour afficher l'indicateur de frappe
  function showTypingIndicator() {
    const typingBubble = createMessageBubble("ü§î Laisse-moi r√©fl√©chir...", false, true);
    typingBubble.id = 'typing-indicator';
    messagesArea.appendChild(typingBubble);
    messagesArea.scrollTop = messagesArea.scrollHeight;
    return typingBubble;
  }

  // Fonction pour supprimer l'indicateur de frappe
  function removeTypingIndicator() {
    const typingIndicator = document.getElementById('typing-indicator');
    if (typingIndicator) {
      typingIndicator.remove();
    }
  }

  // Fonction pour afficher la r√©ponse avec effet de frappe
  function typeResponse(text, targetBubble) {
    targetBubble.textContent = '';
    targetBubble.classList.remove('typing');
    let i = 0;
    
    const typeInterval = setInterval(() => {
      targetBubble.textContent += text[i];
      i++;
      
      // Scroll pendant la frappe
      messagesArea.scrollTop = messagesArea.scrollHeight;
      
      if (i >= text.length) {
        clearInterval(typeInterval);
        isTyping = false;
        
        // Ajouter √† l'historique
        conversationHistory.push({
          type: 'bot',
          content: text,
          timestamp: new Date()
        });
      }
    }, 40);
  }

  // Fonction principale d'envoi de message
  async function sendMessage() {
    const prompt = input.value.trim();
    if (!prompt || isTyping) return;

    console.log('Envoi du message:', prompt);

    // Ajouter le message utilisateur √† l'interface et √† l'historique
    addMessage(prompt, true);
    conversationHistory.push({
      type: 'user',
      content: prompt,
      timestamp: new Date()
    });

    // Vider l'input et d√©sactiver le bouton
    input.value = '';
    sendBtn.disabled = true;
    isTyping = true;

    // Afficher l'indicateur de frappe
    const typingIndicator = showTypingIndicator();

    try {
      const response = await fetch('https://api.leopalich.com/ask', {
        method: 'POST',
        headers: { 
          'Content-Type': 'application/json',
          'Accept': 'application/json, text/plain'
        },
        body: JSON.stringify({ prompt })
      });

      console.log('Status:', response.status);

      if (!response.ok) {
        const errorText = await response.text();
        throw new Error(`Erreur ${response.status}: ${errorText}`);
      }

      const contentType = response.headers.get("content-type");
      console.log('Content-Type:', contentType);

      let responseText = '';

      if (contentType && contentType.includes("application/json")) {
        const data = await response.json();
        responseText = data.response || data.message || data.answer || JSON.stringify(data);
      } else {
        responseText = await response.text();
      }

      console.log('R√©ponse re√ßue:', responseText);
      
      // Supprimer l'indicateur de frappe et cr√©er la bulle de r√©ponse
      removeTypingIndicator();
      
      if (responseText) {
        const responseBubble = addMessage('', false); // Bulle vide pour commencer
        typeResponse(responseText, responseBubble);
      } else {
        const responseBubble = addMessage("R√©ponse vide re√ßue du serveur.", false);
        conversationHistory.push({
          type: 'bot',
          content: "R√©ponse vide re√ßue du serveur.",
          timestamp: new Date()
        });
        isTyping = false;
      }

    } catch (error) {
      console.error('Erreur d√©taill√©e:', error);
      removeTypingIndicator();
      
      const errorMessage = `D√©sol√©, erreur: ${error.message}`;
      const errorBubble = addMessage(errorMessage, false);
      conversationHistory.push({
        type: 'bot',
        content: errorMessage,
        timestamp: new Date()
      });
      isTyping = false;
    } finally {
      sendBtn.disabled = false;
    }
  }

  // Fonction pour vider le message d'accueil initial et d√©marrer proprement
  function initializeChat() {
    // Supprimer le message d'accueil existant
    messagesArea.innerHTML = '';
    
    // Ajouter le message d'accueil √† l'historique et √† l'interface
    const welcomeMessage = "Bonjour, je suis L√©o üëã";
    
    addMessage(welcomeMessage, false);
    conversationHistory.push({
      type: 'bot',
      content: welcomeMessage,
      timestamp: new Date()
    });
  }

  // Event listeners
  sendBtn.addEventListener('click', sendMessage);
  input.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' && !isTyping) {
      sendMessage();
    }
  });

  // Initialiser le chat
  initializeChat();
  input.focus();

  // Fonction pour debug (optionnel)
  window.getChatHistory = () => {
    console.log('Historique de conversation:', conversationHistory);
    return conversationHistory;
  };
}

// Initialisation
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initChat);
} else {
  setTimeout(initChat, 100);
}

// Export global pour le router
window.initChat = initChat;
</script>  </main> <!-- components/Footer.astro --><footer>
¬© 2025 L√©o Palich
</footer> <!-- Router interne (SPA-like) --> <script type="module">
        const main = document.querySelector('main');
        const linkSelector = '[data-nav]';

        async function navigate(url, push = true) {
          main.classList.add('is-loading');

          const html = await fetch(url).then(r => r.text());
          const doc  = new DOMParser().parseFromString(html, 'text/html');

          /* Remplace le contenu du <main> */
          main.innerHTML = doc.querySelector('main').innerHTML;
          setTimeout(() => {
            if (window.initChat && typeof window.initChat === 'function') {
              window.initChat();
            }
          }, 100);

          /* <title> + meta description */
          document.title = doc.title;
          const newDesc = doc.querySelector('meta[name="description"]')?.content;
          if (newDesc) {
            let cur = document.querySelector('meta[name="description"]');
            if (!cur) {
              cur = document.createElement('meta');
              cur.name = 'description';
              document.head.appendChild(cur);
            }
            cur.content = newDesc;
          }

          /* Lien actif */
          document.querySelectorAll(linkSelector).forEach(a =>
            a.classList.toggle('is-active', a.href === url),
          );

          if (push) history.pushState(null, '', url);
          main.classList.remove('is-loading');
          window.scrollTo({ top: 0 });
        }

        /* Interception des clics */
        document.addEventListener('click', (e) => {
          const a = e.target.closest(linkSelector);
          if (!a || a.origin !== location.origin) return;
          e.preventDefault();
          navigate(a.href);
        });

        /* Bouton pr√©c√©dent / suivant */
        window.addEventListener('popstate', () => navigate(location.href, false));
      </script> </div> </body> <div class="glow-wrapper" id="bg" data-astro-cid-276go4px> <div class="gradient layer-1" data-astro-cid-276go4px></div> <div class="gradient layer-2" data-astro-cid-276go4px></div> <div class="gradient layer-3" data-astro-cid-276go4px></div> <div class="fog-texture" data-astro-cid-276go4px></div> <div class="noise" data-astro-cid-276go4px></div> <div class="grain" data-astro-cid-276go4px></div> <div class="dark-overlay" data-astro-cid-276go4px></div> <div class="vignette" data-astro-cid-276go4px></div> </div> <script type="module">const c=document.querySelectorAll(".gradient"),r=[40,65,90];document.addEventListener("pointermove",t=>{const o=t.clientX/window.innerWidth-.5,i=t.clientY/window.innerHeight-.5;c.forEach((e,n)=>{e instanceof HTMLElement&&e.style.setProperty("--parallax",`translate(${o*r[n]}px, ${i*r[n]}px)`)})});</script> </html>